<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-6</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///The power of invincibility.

//Prepare to end invincibility
alarm[0] = 720;

//Play the starman theme if it's not playing.
alarm[2] = 2;

//Leave a trail
alarm[3] = 1;

//Combo
hitcombo = 0;

//Warning
warning = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Leave a trail

//Check if the player exists
if (instance_exists(obj_playerparent)) {
    
    //Create a effect
    if (obj_playerparent.mask_index == spr_mask) {
    
        with (instance_create(x-8+random(16),y+random(16),obj_starspark))
            pal = random(8);
    }
    else if (obj_playerparent.mask_index == spr_bigmask) {
    
        with (instance_create(x-8+random(16),y-11+random(27),obj_starspark))
            pal = random(8);
    }
}

//Repeat
if (alarm[0] &gt; 120)
    alarm[3] = 3;
else
    alarm[3] = 12;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Play invincibility music

//End level music and reset global.music
obj_levelcontrol.alarm[1] = 1;

//Play 'Starman' theme
if (!audio_is_playing(bgm_pswitch))
&amp;&amp; (!audio_is_playing(bgm_starman))
    audio_play_sound(bgm_starman, 0, true);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Destroy

//Make the player vulnerable
if (instance_exists(obj_playerparent)) {

    obj_playerparent.invulnerable = false;
}

//Destroy
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///End invincibility

//Stop starman music
audio_stop_sound(bgm_starman);

//Play level music
obj_levelcontrol.alarm[0] = 2;

//Destroy
alarm[1] = 60;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Invincibility logic

if (instance_exists(obj_playerparent)) {

    //Snap into the player position
    x = obj_playerparent.x;
    y = obj_playerparent.y;
    
    //Make sure the player is invincible
    with (obj_playerparent) {
    
        if (!invulnerable) {
        
            invulnerable = true;
            alarm[0] = -1;
            alarm[1] = -1;
        }
    }
    
    //Hereby the same mask as the player
    if (obj_playerparent.mask_index = spr_mask)
        mask_index = spr_starmask;
    else
        mask_index = spr_starmask_big;
}

//Warn the player that the starman effect is running out
if ((warning == 0) &amp;&amp; (alarm[0] &lt;= 120)) {

    //Play 'Warning' sound
    audio_play_sound(snd_warning, 0, false);
    
    //Warn
    warning = 1;
}
else if ((warning == 1) &amp;&amp; (alarm[0] &gt; 120)) 
    warning = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Remember the star for the next room

//If the game is not being restarted
if (obj_persistent.restart == false) {

    //If the starman is still running.
    if (alarm[0] &gt; 5)
        global.starman = alarm[0];
        
    //Otherwise
    else
        audio_stop_sound(bgm_starman);
}
else 
    audio_stop_sound(bgm_starman);  
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
