<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_mario_big_walk</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-5</depth>
  <persistent>0</persistent>
  <parentName>obj_playerparent</parentName>
  <maskName>spr_bigmask</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///It's a me, Mario.

//Call parent variables
event_inherited();

//Wall kick variables
wallkick = 0;
wallready = 0;

//Maximum horizontal speed
xspeedmax = 1.45;

//Jump strength
jumpstr = 3.4675;
frogjumpstr = 3.7675;

//Acceleration
acc = 0.06;

//Acceleration (frog suit)
accfrog = 0.12;

//Acceleration (when turning)
accskid = 0.15;

//Deceleration
dec = 0.0375;

//Deceleration (when turning)
decskid = 0.072;

//Gravity
grav = 0.3625; //0.3

//Gravity when jumping
grav_alt = 0.0625; //0.065

//Acceleration (when swimming)
acc_swim = 0.025;

//Acceleration (when turning at water)
accskid_swim = 0.05;

//Deceleration (when swimming)
dec_swim = 0.007;

//Gravity (when swimming)
grav_swim = 0.03;

//Max. walk speed
walkspeed = 1.3;

//Max. run speed
runspeed = 2.7;

//Max. full run speed
fullrunspeed = 3.5;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Handle Mario's projectiles

//If controls are not disabled and Mario is not holding or doing a spinjump.
if (disablecontrol == false)
&amp;&amp; (sliding == 0)
&amp;&amp; (holding == 0)
&amp;&amp; (kicking == 0)
&amp;&amp; (wallkick == 0)
&amp;&amp; (stompstyle != 1) {
        
    //Tanooki
    if (global.powerup == cs_tanooki)
    &amp;&amp; (keyboard_check(global.downkey))
    &amp;&amp; (global.mount == 0)
    &amp;&amp; (instance_number(obj_spinner) &lt; 1) {
            
        //Play a transforming sound.
        audio_play_sound(snd_transform, 0, false);
    
        //Create a poof.
        with (instance_create(x,y,obj_player_transform)) sequence = 4;
        
        //Create a statue.
        instance_create(x,y,obj_statue);        
    }
    
    //Cat
    else if (global.powerup == cs_cat)
    &amp;&amp; (keyboard_check(global.downkey))
    &amp;&amp; (global.mount == 0)
    &amp;&amp; (state == 2)
    &amp;&amp; (yspeed &gt; 0)
    &amp;&amp; (instance_number(obj_spinner) == 0)
    &amp;&amp; (instance_number(obj_dropdown) &lt; 1) {
    
        //Create drop down
        with (instance_create(x,y,obj_dropdown))
            image_xscale = 1*sign(other.xscale);
    }
    
    //If Mario is not crouched down
    else if (!crouch) {
    
        //Fireball
        if (global.powerup == cs_fire)
        &amp;&amp; (instance_number(obj_fireball) &lt; 2) {
        
            firing = 9;
            with (instance_create(x,y,obj_fireball)) {
            
                hspeed = 3*sign(other.xscale);
                if (keyboard_check(global.upkey))
                    vspeed = -3;
            }
        }            
        
        //Iceball
        else if ((global.powerup == cs_ice) || ((global.powerup == cs_penguin) &amp;&amp; (swimming == false)))
        &amp;&amp; (instance_number(obj_iceball) &lt; 2) {
        
            firing = 9;
            with (instance_create(x,y,obj_iceball)) {
            
                hspeed = other.xspeed+(1.2*sign(other.xscale));
                if (keyboard_check(global.upkey))
                    vspeed = -3;
            }
        }
        
        //Raccoon / Tanooki or Cat
        else if ((global.powerup == cs_leaf) || (global.powerup == cs_tanooki) || (global.powerup == cs_cat))
        &amp;&amp; (instance_number(obj_dropdown) == 0)
        &amp;&amp; (instance_number(obj_spinner) &lt; 1) {
        
            with (instance_create(x,y,obj_spinner))
                image_xscale = 1*sign(other.xscale);
        }
            
        //Hammer
        else if (global.powerup == cs_hammer)
        &amp;&amp; (instance_number(obj_hammer) &lt; 2) {
        
            firing = 9;
            with (instance_create(x,y,obj_hammer)) {
            
                hspeed = other.xspeed+(1.25*sign(other.xscale));
                if (keyboard_check(global.upkey))
                    vspeed = -5;
            }
        }
        
        //Boomerang
        else if (global.powerup == cs_boomerang)
        &amp;&amp; (instance_number(obj_boomerang) &lt; 2) {
        
            firing = 9;
            with (instance_create(x,y-10,obj_boomerang))
                hspeed = 2*sign(other.xscale);
        }
        
        //Superball
        else if (global.powerup == cs_super)
        &amp;&amp; (instance_number(obj_superball) &lt; 2) {
        
            firing = 9;
            with (instance_create(x,y,obj_superball)) {
            
                hspeed = 3*sign(other.xscale);
                if (keyboard_check(global.upkey))
                    vspeed = -3;
            }
        }
        
        //Bomb
        else if (global.powerup == cs_bomb)
        &amp;&amp; (instance_number(obj_bomb) &lt; 1) {
        
            with (instance_create(x-8,y,obj_bomb))
                held = 1;
        }
        
        //Lightning
        else if (global.powerup == cs_lightning)
        &amp;&amp; (instance_number(obj_bolt) &lt; 2) {
        
            firing = 9;
            with (instance_create(x,y+2,obj_bolt))
                hspeed = 6*sign(other.xscale);
        }
        
        //Football
        else if (global.powerup == cs_football)
        &amp;&amp; (instance_number(obj_football) &lt; 1) {
        
            with (instance_create(x-8,y,obj_football))
                held = 1;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Handle particle effects

//If Mario is turning, sliding and it's on contact with the ground.
if (sprite_index == scr_mario_skid()) || ((sliding) &amp;&amp; (state &lt; 2)) {

    //If Mario is not crouched down and not wall climbing
    if (!crouch) 
    &amp;&amp; (wallkick != 1) {
    
        //If Mario has the penguin powerup and it is sliding on water.
        if (global.powerup == cs_penguin) {
        
            //Check for water
            var water = collision_rectangle(bbox_left, bbox_bottom+1, bbox_right, bbox_bottom+2, obj_swim, 0, 0);
        
            //If there's water
            if (water) {
            
                //Create splash effect
                with (instance_create(x,water.y-15,obj_smoke))        
                    sprite_index = spr_splash;                            
            }
            
            //OTherwise
            else {
            
                //Create normal smoke effect
                with (instance_create(x,bbox_bottom-4,obj_smoke))        
                    sprite_index = spr_smoke_c;                
            }            
        }
        
        else {
        
            //Create normal smoke effect
            with (instance_create(x,bbox_bottom-4,obj_smoke))        
                sprite_index = spr_smoke_c;
        }
        
        //Repeat
        alarm[10] = 2;
    }
    
    //Otherwise, hold it
    else
        alarm[10] = 1;
}

//Otherwise, if Mario is walljumping
else if ((wallkick == 1) &amp;&amp; (yspeed &gt; 0)) {

    //If Mario is small
    if (global.powerup == cs_small) {
        
        with (instance_create(x+5*sign(xscale), y, obj_smoke))
            sprite_index = spr_smoke_c;
    }
    
    //Otherwise, if Mario is not small
    else {
    
        with (instance_create(x+5*sign(xscale), y-8, obj_smoke))
            sprite_index = spr_smoke_c;        
    }
    
    //Repeat the process
    alarm[10] = 4;
}

//Otherwise, hold it
else
    alarm[10] = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Reset various actions of Mario

//Reset the wallkick
wallkick = 0;
wallready = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Throw projectiles when spinning

//If the player is doing a spinjump and it's not riding anything
if (stompstyle == 1) 
&amp;&amp; (global.mount == 0) {
    
    //Fireball
    if (global.powerup == cs_fire) {
    
        with (instance_create(x,y,obj_fireball)) 
            hspeed = 3*sign(other.dir);
    }         
    
    //Iceball
    else if ((global.powerup == cs_ice) || ((global.powerup == cs_penguin) &amp;&amp; (swimming == false))) {
    
        with (instance_create(x,y,obj_iceball)) 
            hspeed = 1.2*sign(other.dir);
    }
        
    //Hammer
    else if (global.powerup == cs_hammer) {
    
        with (instance_create(x,y,obj_hammer)) 
            hspeed = 1.25*sign(other.dir);
    }
    
    //Superball
    else if (global.powerup == cs_super) {
    
        with (instance_create(x,y,obj_superball)) 
            hspeed = 3*sign(other.dir);
    }
    
    //Lightning
    else if (global.powerup == cs_lightning) {
    
        with (instance_create(x,y+2,obj_bolt)) 
            hspeed = 6*sign(other.dir);
    }
    
    //Change the facing direction
    dir = -dir;
    
    //Set alarm based on direction
    if (dir == 1)
        alarm[3] = 15;
    else
        alarm[3] = 30;
}

//Otherwise, deny event
else
    alarm[3] = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Mario's animation

//Reset up firing
if (firing &gt; 0)
&amp;&amp; (state == 1)
    firing = 0;

//If Mario is crouched down
if (crouch == true) {

    //If Mario has the leaf or tanooki powerups
    if ((global.powerup == cs_leaf) || (global.powerup == cs_tanooki)) {
    
        //Do not animate unless the script permits it.
        image_speed = 0;
    
        //Check if Mario is holding something first.
        if (holding == 0)
            image_index = 0+(wiggle/4);
        else if (holding == 2)
            image_index = 5+(wiggle/4);
        else
            image_index = 4;
    }
    else {
    
        //Do not animate
        image_speed = 0;
        
        //Set up the correct frame
        if (holding = 0)
            image_index = 0;
        else {
        
            if (holding == 2)
                image_index = 2;
            else
                image_index = 1;
        }
    }
    
    //Set the sprite
    sprite_index = scr_mario_duck();
    
    //Do not skid
    skidnow = 0;
    
    //Set the mask
    mask_index = spr_mask;
    
    //Stop 'Skid' sound
    if (audio_is_playing(snd_skid))
        audio_stop_sound(snd_skid);
}
else {

    //If Mario is not holding anything
    if (holding == 0) {
    
        //If Mario is not sliding down a slope
        if (!sliding) {
        
            //If Mario is not kicking/throwing something.
            if (!kicking) {
            
                //If Mario is not doing anything
                if (state == 0) {
                
                    //If Mario is firing something
                    if (firing &gt; 0) 
                    &amp;&amp; (sprite_index != scr_mario_somersault()) {
                    
                        //Set the sprite
                        sprite_index = scr_mario_shoot();
                        
                        //Do not animate
                        image_speed = 0;
                        
                        //Decrement fire
                        firing--;
                        
                        //...but set the appropiate frame
                        if (firing &gt; 4)
                            image_index = 0;
                        else
                            image_index = 1;
                    }
                    else {
                    
                        //Set the sprite
                        sprite_index = scr_mario_walk();
                        
                        //Do not animate
                        image_speed = 0;
                        image_index = 0;
                    }
                }
                
                //Otherwise, if Mario is walking
                else if (state == 1) {
                
                    //Check first the horizontal speed and facing direction of Mario.
                    if ((((xspeed &gt; 0.1) &amp;&amp; (xscale == -1))
                    || ((xspeed &lt; -0.1) &amp;&amp; (xscale == 1)))
                    &amp;&amp; (!swimming)
                    &amp;&amp; (global.powerup != cs_frog)
                    &amp;&amp; (!collision_rectangle(bbox_left,bbox_bottom,bbox_right,bbox_bottom+1,obj_slippery,0,0))) {
                    
                        //Set the skidding sprite
                        sprite_index = scr_mario_skid();
                        
                        //Do not animate
                        image_speed = 0;
                        image_index = 0;
                        
                        //Play 'Skid' sound
                        if (!audio_is_playing(snd_skid))
                            audio_play_sound(snd_skid, 0, true);
                    }
                    
                    //Set the animation speed
                    else {
                        
                        //If Mario does not have the frog powerup
                        if (global.powerup != cs_frog)
                        &amp;&amp; (global.powerup != cs_penguin)
                            image_speed = isinice() * 0.065+abs(xspeed)/7.5;
                            
                        //Otherwise, if Mario does have the frog suit.
                        else if (global.powerup == cs_frog) {
                            
                            //If Mario is swimming
                            if (swimming) {
                            
                                //If Mario is not holding anything.
                                if (holding == 0) {
                                
                                    if (xspeed == 0)
                                        image_speed = 0.1;
                                    else
                                        image_speed = 0.1+(0.1*keyboard_check(global.controlkey));
                                }
                                else
                                    image_speed = isinice() * 0.065+abs(xspeed)/7.5;
                            }
                            
                            //Otherwise, if Mario is not swimming
                            else {
                            
                                if (holding == 0)
                                    image_speed = 0.1;
                                else
                                    image_speed = isinice() * 0.065+abs(xspeed)/7.5;
                            }                        
                        }
                        
                        //Otherwise, if Mario does have the penguin suit.
                        else if (global.powerup == cs_penguin) {
                            
                            //If Mario is swimming
                            if (swimming) {
                            
                                //If Mario is not holding anything.
                                if (holding == 0) {
                                
                                    if (xspeed == 0)
                                        image_speed = 0.1;
                                    else
                                        image_speed = 0.1+(0.1*keyboard_check(global.controlkey));
                                }
                                else
                                    image_speed = isinice() * 0.065+abs(xspeed)/7.5;
                            }
                            
                            //Otherwise, if Mario is not swimming
                            else
                                image_speed = isinice() * 0.065+abs(xspeed)/7.5;                         
                        }
                    
                        //If Mario is running
                        if (run)                     
                            sprite_index = scr_mario_run();
                        else {
                                             
                            if ((global.powerup == cs_frog)
                            || (global.powerup == cs_penguin))
                            &amp;&amp; (swimming)
                                sprite_index = scr_mario_swim();
                            else
                                sprite_index = scr_mario_walk();
                        }
                    }
                }
                
                //Otherwise, if Mario is jumping
                else if (state == 2) {
                
                    //If Mario is shooting a projectile
                    if (firing &gt; 0) 
                    &amp;&amp; (sprite_index != scr_mario_somersault()) {
                    
                        //Set the sprite
                        sprite_index = scr_mario_shoot();
                        
                        //Do not animate
                        image_speed = 0;
                        
                        //Decrement fire
                        firing--;
                        
                        //...but set the appropiate frame
                        if (firing &gt; 4)
                            image_index = 2;
                        else
                            image_index = 3;                    
                    }
                
                    //Otherwise, if Mario is not shooting a projectile.
                    else {
                        
                        //If Mario is not swimming
                        if (!swimming) {
                        
                            //If Mario is doing a spinjump
                            if (stompstyle &gt; 0) {
                            
                                //If Mario does have the propeller suit
                                if (global.powerup == cs_propeller) {
                                
                                    //Check if the 'Down' key is pressed
                                    if ((yspeed &lt; 0) || (keyboard_check(global.downkey))) {
                                    
                                        //Set the special spinning sprite
                                        sprite_index = scr_mario_spin2();
                                        
                                        //Animate it
                                        image_speed = 0.065+abs(yspeed)/7.5;;
                                    }
                                    else {
                                    
                                        //Set the walking sprite
                                        sprite_index = scr_mario_spin();
                                        
                                        //Animate it
                                        image_speed = 0.2;
                                    }
                                }
                                
                                //If Mario does not have the propeller or cat suit
                                else {
                                
                                    //Set the spinning sprite
                                    sprite_index = scr_mario_spin();
                                    
                                    //Animate it
                                    image_speed = 0.5;
                                }
                            }
                            
                            //If Mario is not doing a spin jump
                            else {
                            
                                //If the player is doing a somersault
                                if (somersault) {
                                
                                    //Set up the somersault sprite
                                    sprite_index = scr_mario_somersault();
                                    
                                    //Do not animate
                                    image_speed = 0;
                                    image_index = 0;
                                }
                             
                                else {
                                
                                    //If Mario does have the carrot powerup
                                    if (global.powerup == cs_carrot) {
                                    
                                        //If Mario is wallclimbing
                                        if (wallkick == 1) {
                                        
                                            //Set the sprite
                                            sprite_index = scr_mario_walljump();
                                            
                                            //Do not animate
                                            image_speed = 0;
                                            image_index = 0;
                                        }
                                        
                                        //Otherwise, if it's not
                                        else {
                                    
                                            //If Mario is moving up
                                            if (yspeed &lt; 0)
                                                image_index = 0;
                                            else {
                                            
                                                if (floatnow &gt; 0)
                                                    image_speed = 0.15;
                                                else {
                                                
                                                    if (run)
                                                        image_index = 0;
                                                    else
                                                        image_index = 1;
                                                }
                                            }
                                            
                                            //If Mario is running
                                            if (!run)
                                                sprite_index = scr_mario_jump();
                                            else
                                                sprite_index = scr_mario_runjump();
                                        }
                                    }
                                    
                                    //Else, if Mario does have the bee powerup
                                    else if (global.powerup == cs_bee) {
                                    
                                        //If Mario is wallclimbing
                                        if (wallkick == 1) {
                                        
                                            //Set the sprite
                                            sprite_index = scr_mario_walljump();
                                            
                                            //Do not animate
                                            image_speed = 0;
                                            image_index = 0;                                
                                        }
                                        else {
                                        
                                            //If Mario is moving down
                                            if (yspeed &gt; 0)
                                                image_index = 1;
                                            else {
                                            
                                                if (floatnow &gt; 0)
                                                    image_speed = 0.15;
                                                else if (yspeed &lt; -1.1)
                                                    image_index = 0;
                                            }
                                                                                
                                            //If Mario is running
                                            if (!run)
                                                sprite_index = scr_mario_jump();
                                            else
                                                sprite_index = scr_mario_runjump();
                                        }
                                    }
                                    
                                    //Otherwise, if Mario does not have any of the above powerups
                                    else {
                                    
                                        //Do not animate
                                        image_speed = 0;
                                        
                                        //If Mario does have the frog powerup
                                        if (global.powerup == cs_frog) {
                                        
                                            //If Mario is wallclimbing
                                            if (wallkick == 1) {
                                            
                                                //Set the sprite
                                                sprite_index = scr_mario_walljump();
                                                
                                                //Do not animate
                                                image_speed = 0;
                                                image_index = 0;
                                            }
                                            
                                            //Otherwise, if it's not wallclimbing
                                            else {
                                    
                                                //Set the sprite
                                                sprite_index = scr_mario_walk();
                                            
                                                //Set up the frame
                                                image_index = 2;
                                            }
                                        }
                                        
                                        //Otherwise, if Mario does not have the frog powerup
                                        else {
                                        
                                            //If Mario is wallclimbing
                                            if (wallkick == 1) {
                                            
                                                //If Mario does have the Cat powerup
                                                if (global.powerup == cs_cat) {
                                                
                                                    //Set the alt climbing sprite
                                                    sprite_index = spr_mario_cat_climb2;
                                                    
                                                    //Animate
                                                    if (yspeed &lt; 0) 
                                                        image_speed = 0.15;
                                                    else {
                                                    
                                                        image_speed = 0;
                                                        image_index = 0;
                                                    }
                                                }
                                                else {
                                                
                                                    //Set the skid sprite
                                                    sprite_index = scr_mario_walljump();
                                                    
                                                    //Do not animate
                                                    image_speed = 0;
                                                    image_index = 0;
                                                }
                                            }
                                            else {    
                                    
                                                //...but set the appropiate frame
                                                if (yspeed &lt; 0) {
                                                
                                                    if ((global.powerup == cs_leaf)
                                                    || (global.powerup == cs_tanooki))
                                                        image_index = 0+(wiggle/4);
                                                    else
                                                        image_index = 0;
                                                }
                                                else {
                                                
                                                    //If Mario is running
                                                    if (run)
                                                        image_index = 0+(wiggle/4);
                                                    else
                                                        image_index = 1+(wiggle/4);
                                                }
                                                
                                                //Set the appropiate sprite
                                                if (!run)
                                                &amp;&amp; (global.pwing == 0)
                                                    sprite_index = scr_mario_jump();
                                                else
                                                    sprite_index = scr_mario_runjump(); 
                                            }
                                        }
                                    }
                                }                 
                            }
                        }
                        
                        //Otherwise, if Mario is swimming
                        else if (swimming) {
                        
                            //If Mario does have either the frog or penguin powerups.
                            if (global.powerup == cs_frog)
                            || (global.powerup == cs_penguin) {
                            
                                //If Mario is swimming to the sides
                                if (swimtype == 0) {
                                
                                    //Set up the sprite
                                    sprite_index = scr_mario_swim();
                                
                                    //...and animate it
                                    if (xspeed == 0)
                                        image_speed = 0.1;
                                    else
                                        image_speed = 0.1+(0.1*keyboard_check(global.controlkey));
                                }
                                
                                //Otherwise, if Mario is swimming upwards
                                else if (swimtype == 1) {
                                
                                    //Set up the sprite
                                    sprite_index = scr_mario_swim2();
                                    
                                    //Set the speed
                                    if ((x != xprevious) || (y != yprevious))
                                        image_speed = 0.1+(0.1*keyboard_check(global.controlkey));
                                    else
                                        image_speed = 0;
                                }
                                
                                //Otherwise, if Mario is swimming downwards
                                else if (swimtype == 2) {
                                
                                    //Set up the sprite
                                    sprite_index = scr_mario_swim3();
                                    
                                    //Set the speed
                                    if ((x != xprevious) || (y != yprevious))
                                        image_speed = 0.1+(0.1*keyboard_check(global.controlkey));
                                    else
                                        image_speed = 0;
                                }
                            }
                            
                            //Otherwise, if Mario does not have any of the above powerups
                            else {
                            
                                //Set up the sprite
                                sprite_index = scr_mario_swim();
                                
                                //Set the speed
                                if (yspeed &lt; 0)
                                    image_speed = 0.15;
                                else {
                                
                                    image_speed = 0;
                                    image_index = 0;
                                }
                            }
                        }
                    }
                }
                
                //Otherwise, if Mario is climbing
                else if (state == 3) {
                
                    //Set up the sprite
                    sprite_index = scr_mario_climb();
                    
                    //Set the speed
                    if ((xspeed != 0) || (yspeed &lt; 0))
                        image_speed = 0.15;
                    else {
                    
                        image_speed = 0;
                        image_index = 0;
                    }
                }
            }
            
            //Otherwise, if Mario is kicking or throwing something
            else if (kicking &gt; 0) {
            
                //Set up the sprite
                sprite_index = scr_mario_kick();
                
                //Set the frame
                image_speed = 0;
                if ((kicking == 1) || (kicking == 3))
                    image_index = 0;
                else
                    image_index = 1;
            }
        }
        
        //Otherwise, if Mario is sliding down a slope
        else if (sliding) {
        
            //If Mario does have the shell powerup
            if (global.powerup == cs_shell) {
            
                //If the sprite is not the sliding one
                if (sprite_index != scr_mario_slide()) {
                
                    //Set up the sprite
                    sprite_index = scr_mario_slide();
                    
                    //Set up the frame
                    if (image_index != 0)
                        image_index = 0;
                }
                
                //Animate
                image_speed = isinice() * 0.065+abs(xspeed)/7.5;
            }
            else {
                
                //Set up the sprite
                sprite_index = scr_mario_slide();
                
                //Do not animate
                image_speed = 0;
                image_index = 0;
            }
        }
    }
    
    //Otherwise, if Mario is carrying something over his head
    else if (holding == 1) {
    
        //Set up the sprite
        sprite_index = scr_mario_carry();
        
        //If Mario is not walking
        if (state == 0) {
        
            //Do not animate
            image_speed = 0;
            image_index = 0;
        }
        
        //Otherwise, if Mario is walking
        else if (state == 1) {
        
            //Set the animation speed
            image_speed = isinice() * 0.065+abs(xspeed)/7.5;
        }
        
        //Otherwise, if Mario is jumping
        else if (state == 2) {
        
            //If Mario does have either the carrot or bee powerup.
            if (global.powerup == cs_carrot) 
            || (global.powerup == cs_bee) {
            
                //If Mario is floating
                if (floatnow &gt; 0)
                    image_speed = 0.15;
                else {
                
                    image_speed = 0;
                    image_index = 0;
                }
            }
            
            //Otherwise, if Mario does have either the raccoon or tanooki powerup.
            else if (global.powerup == cs_leaf)
            || (global.powerup == cs_tanooki) {
            
                image_speed = 0;
                image_index = 0+(wiggle/4);
            }
            
            //Otherwise, do not animate
            else {
            
                image_speed = 0;
                image_index = 1;
            }
        }
    }
    
    //Otherwise, if Mario is holding something at his front
    else if (holding == 2) {
        
        //If Mario is not walking
        if (state == 0) {
        
            //Do not animate
            image_speed = 0;
            image_index = 0;
        }
        
        //Otherwise, if Mario is walking
        else if (state == 1) {
        
            //If Mario is not turning
            if (!turning)
                image_speed = isinice() * 0.065+abs(xspeed)/7.5;
                
            //Otherwise, if Mario is turning
            else {

                image_speed = 0;
                image_index = 0;
            }
        }
        
        //Otherwise, if Mario is jumping
        else if (state == 2) {
        
            //If the player is not turning
            if (!turning) {
            
                //If Mario does have either the carrot or bee powerup.
                if (global.powerup == cs_carrot) 
                || (global.powerup == cs_bee) {
                
                    //If Mario is floating
                    if (floatnow &gt; 0)
                        image_speed = 0.15;
                    else {
                    
                        image_speed = 0;
                        image_index = 0;
                    }
                }
                
                //Otherwise, if Mario does have either the raccoon or tanooki powerup.
                else if (global.powerup == cs_leaf)
                || (global.powerup == cs_tanooki) {
                
                    image_speed = 0;
                    image_index = 0+(wiggle/4);
                }
                
                //Otherwise, do not animate
                else {
                
                    image_speed = 0;
                    image_index = 1;
                }
            }
            
            //Otherwise, set turning pose
            else {
            
                image_speed = 0;
                image_index = 0;
            }
        }
        
        //Set the sprite
        if (!turning)
            sprite_index = scr_mario_hold();
        else
            sprite_index = scr_mario_spin();
    }
    
    //Otherwise, if Mario is carrying a boomerang
    else if (holding == 3) {
    
        //Set up the sprite
        sprite_index = scr_mario_hold2();
        
        //If Mario is not walking
        if (state == 0) {
        
            //Do not animate
            image_speed = 0;
            image_index = 0;
        }
        
        //Otherwise, if Mario is walking
        else if (state == 1) {
        
            //Set the animation speed
            image_speed = isinice() * 0.065+abs(xspeed)/7.5;
        }
        
        //Otherwise, if Mario is jumping
        else if (state == 2) {
        
            //If Mario does have either the carrot or bee powerup.
            if (global.powerup == cs_carrot) 
            || (global.powerup == cs_bee) {
            
                //If Mario is floating
                if (floatnow &gt; 0)
                    image_speed = 0.15;
                else {
                
                    image_speed = 0;
                    image_index = 0;
                }
            }
            
            //Otherwise, if Mario does have either the raccoon or tanooki powerup.
            else if (global.powerup == cs_leaf)
            || (global.powerup == cs_tanooki) {
            
                image_speed = 0;
                image_index = 0+(wiggle/4);
            }
            
            //Otherwise, do not animate
            else {
            
                image_speed = 0;
                image_index = 1;
            }
        }
    }
    
    //Set the mask
    if (global.powerup == cs_small)
        mask_index = spr_mask;
    else {
    
        //If Mario does have the frog powerup.
        if (global.powerup == cs_frog) {
        
            if (holding &gt; 0)
                mask_index = spr_bigmask;
            else
                mask_index = spr_mask;
        }
        
        //Otherwise, if Mario does have the either the shell or penguin powerups.
        else if (global.powerup == cs_shell) 
        || (global.powerup == cs_penguin) {
        
            //If Mario is sliding down a slope
            if (sliding) {
            
                //If Mario does not have the shell powerup
                if (global.powerup != cs_shell)
                    mask_index = spr_mask;
                else {
                
                    if (xspeed == 0)
                        mask_index = spr_mask;
                    else
                        mask_index = spr_shellmask;
                }
            }
            
            //Otherwise, set the default mask
            else
                mask_index = spr_bigmask;
        }
        
        //Otherwise, set the default mask
        else
            mask_index = spr_bigmask;
    }
    
    //Stop the 'Skid' sound when not changing direction.
    if (sprite_index != scr_mario_skid())
    &amp;&amp; (audio_is_playing(snd_skid))
        audio_stop_sound(snd_skid);
}                  
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="24">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Reset player variables

//End walljumping
wallkick = 0;
wallready = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Make Mario do stuff when it's animation ends.

//If Mario is walking with the frog suit
if (sprite_index == spr_mario_frog_walk) {

    //Play 'Frog' sound
    audio_play_sound(snd_frog, 0, false);

    //If the horizontal speed is not equal to 0.
    if (xspeed &lt;&gt; 0)
        xspeed = 0;
}

//Otherwise, if Mario is floating with the either the carrot or bee powerup.
else if ((sprite_index == spr_mario_carrot_jump)
|| (sprite_index == spr_mario_bee_jump))
    image_index = 1;
    
//Otherwise, if Mario is sliding inside his shell.
else if (sprite_index == spr_mario_shell_slide)
    image_index = 2;
    
//Otherwise, if Mario is climbing with the cat suit
else if (sprite_index == spr_mario_cat_climb2)
    image_index = 1;
    
//Otherwise, if Mario is swimming with either the frog or penguin powerup.
else if ((sprite_index == spr_mario_frog_swim2) || (sprite_index == spr_mario_penguin_swim2))
|| ((sprite_index == spr_mario_frog_swim3) || (sprite_index == spr_mario_penguin_swim3))
|| ((sprite_index == spr_mario_frog_swim4) || (sprite_index == spr_mario_penguin_swim4)) {

    //Play 'Swim' sound
    audio_stop_sound(snd_swim);
    audio_play_sound(snd_swim, 0, false);
}

//Otherwise, if Mario is dashing while having the football suit
else if (sprite_index == spr_mario_football_run) {

    //Play 'Bump' sound
    audio_stop_sound(snd_bump);
    audio_play_sound(snd_bump, 0, false);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Mario

//Draw the player frozen
if (freezetime &gt; 0) {

    //Set shader
    pal_swap_set(spr_palette_mario, 7);

    //Draw the player first
    draw_sprite_player(sprite_index, -1, round(x), round(y)+1, xscale, 1, 0, c_white, image_alpha, 0);
    
    //End shader
    pal_swap_reset();
}

//Otherwise, draw normally
else if (freezetime == 0) {

    //Set the shader
    pal_swap_set(spr_palette_mario, isflashing);
    
    //If Mario is small
    if (global.powerup == cs_small) {
    
        //If Mario is doing a somersault
        if (sprite_index == scr_mario_somersault())
            draw_sprite_player(scr_mario_somersault(),-1,round(x)+shake,round(y)+8,xscale,1,angle,c_white,image_alpha,0); 
            
        //Otherwise
        else
            draw_sprite_player(sprite_index,-1,round(x)+shake,round(y)+1,xscale,1,angle,c_white,image_alpha,0); 
        
    }
    else {
    
        //Draw player
        draw_sprite_player(sprite_index,-1,round(x)+shake,round(y)+1,xscale,1,angle,c_white,image_alpha,0);        
    }
    
    //End shader
    pal_swap_reset();
    
    //Draw a tornado if spinning down with the propeller suit
    if (global.powerup == cs_propeller)
    &amp;&amp; (stompstyle == 1)
        draw_sprite_ext(spr_tornado,-1,round(x),round(y)+1,1,1,0,c_white,0.5);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
